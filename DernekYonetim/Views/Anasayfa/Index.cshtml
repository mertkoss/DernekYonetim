@using DernekYonetim.Models
@model DernekYonetim.Models.HomeViewModel

@{
    ViewData["Title"] = "Anasayfa";
    Layout = "_Layout";
}

<style>
    /* GENEL DEĞİŞKENLER */
    :root {
        --renk-lacivert: #0a1a5c;
        --renk-altin: #b8860b;
        --renk-acik-altin: #d4a017;
        --renk-gri: #f8fafc;
    }

    /* SLIDER AYARLARI (ZORUNLU) */
    .hero-section {
        position: relative;
        width: 100%;
        height: 85vh !important; /* Ekranın %85'i */
        min-height: 600px;
        overflow: hidden;
        padding: 0;
        margin: 0;
    }

    .carousel, .carousel-inner, .carousel-item {
        height: 100% !important;
    }

    .carousel-item {
        width: 100%;
        background-size: cover !important;
        background-position: center center !important;
        background-repeat: no-repeat !important;
    }

    /* Görselin üzerine gelen koyu perde */
    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to right, rgba(10, 26, 92, 0.9) 0%, rgba(10, 26, 92, 0.6) 50%, rgba(10, 26, 92, 0.2) 100%);
        display: flex;
        align-items: center;
        z-index: 1;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        color: white;
        padding-left: 5%;
    }

        .hero-content h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1.2;
        }

    /* İSTATİSTİK BÖLÜMÜ */
    .stats-section {
        background-color: var(--renk-lacivert);
        color: white;
        padding: 60px 0;
    }

    .stat-item {
        text-align: center;
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        color: white;
    }

    .stat-label {
        color: var(--renk-altin);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 5px;
    }

    .stat-icon i {
        font-size: 2.5rem;
        color: var(--renk-altin);
        margin-bottom: 15px;
    }

    /* OKULLAR BÖLÜMÜ */
    .schools-section {
        padding: 80px 0;
        background-color: var(--renk-gri);
    }

    .school-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        height: 100%;
        transition: transform 0.3s;
    }

        .school-card:hover {
            transform: translateY(-10px);
        }

    .school-img {
        height: 200px;
        background-size: cover;
        background-position: center;
    }

    .school-body {
        padding: 20px;
    }

    /* --- HAKKIMIZDA BÖLÜMÜ (YENİ EKLENECEK KISIM) --- */
    .about-modern-section {
        padding: 100px 0;
        background-color: #fff;
        position: relative;
    }

    /* Görselin modern duruşu için kapsayıcı */
    .about-img-wrap {
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1); /* Hafif gölge */
        transition: transform 0.3s ease;
    }

        .about-img-wrap:hover {
            transform: translateY(-5px); /* Üzerine gelince hafif yukarı kalksın */
        }

        .about-img-wrap img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }

    /* HTML'de kullandığın 'text-gold-header' sınıfı */
    .text-gold-header {
        color: var(--renk-altin);
        letter-spacing: 2px;
        font-size: 0.9rem;
    }

    /* HTML'de kullandığın 'text-navy-header' sınıfı */
    .text-navy-header {
        color: var(--renk-lacivert);
        font-family: 'Playfair Display', serif;
        font-size: 2.5rem;
        line-height: 1.2;
    }

    /* İçerik metni */
    .about-text {
        color: var(--renk-text);
        line-height: 1.8; /* Satır aralarını açarak okunabilirliği artırır */
        font-size: 1.05rem;
        opacity: 0.9;
    }

        /* İçerik içindeki paragraflar arası boşluk */
        .about-text p {
            margin-bottom: 20px;
        }
</style>

<header class="hero-section">
    <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">

            <div class="carousel-item active" style="background-image: url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?q=80&w=2070');">
                <div class="overlay">
                    <div class="container">
                        <div class="hero-content">
                            <h1>Eğitimde <span style="color:var(--renk-altin);">Fırsat Eşitliği</span></h1>
                            <p class="mt-3 fs-5" style="max-width: 600px; opacity:0.9;">Yarım asırdır aydınlık nesiller yetiştirmek için çalışıyoruz. Geleceğe atılan her adımda yanınızdayız.</p>
                            <a href="#" class="btn btn-light btn-lg rounded-pill px-4 fw-bold mt-4" style="color:var(--renk-lacivert);">Daha Fazla Bilgi</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1541339907198-e08756dedf3f?q=80&w=2070');">
                <div class="overlay">
                    <div class="container">
                        <div class="hero-content">
                            <h1>Tevfik Fikret'in <span style="color:var(--renk-altin);">İzinde</span></h1>
                            <p class="mt-3 fs-5" style="max-width: 600px; opacity:0.9;">Fikri hür, irfanı hür, vicdanı hür nesiller için eğitim meşalesini taşıyoruz.</p>
                            <a href="#" class="btn btn-light btn-lg rounded-pill px-4 fw-bold mt-4" style="color:var(--renk-lacivert);">Okullarımızı Keşfet</a>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</header>

<section class="stats-section">
    <div class="container">
        <div class="row g-4">
            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon"><i class="fa fa-graduation-cap"></i></div>

                    <div class="stat-number counter" data-count="1965">0</div>

                    <div class="stat-label">Kuruluş Yılı</div>
                </div>
            </div>

            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon"><i class="fa fa-users"></i></div>

                    <div class="stat-number counter" data-count="5000" data-suffix="+">0</div>

                    <div class="stat-label">Mezun</div>
                </div>
            </div>

            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon"><i class="fa fa-hand-holding-heart"></i></div>

                    <div class="stat-number counter" data-count="1200">0</div>

                    <div class="stat-label">Bursiyer</div>
                </div>
            </div>

            <div class="col-6 col-md-3">
                <div class="stat-item">
                    <div class="stat-icon"><i class="fa fa-eye"></i></div>

                    <div class="stat-number counter" data-count="@ViewBag.ZiyaretciSayisi">0</div>

                    <div class="stat-label">Ziyaret</div>
                </div>
            </div>
        </div>
    </div>
</section>
 

<section class="schools-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 style="font-family:'Playfair Display'; font-weight:800; color:#0a1a5c;">Eğitim Kurumlarımız</h2>
            <div style="width:80px; height:4px; background:#b8860b; margin:10px auto;"></div>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="school-card">
                    <div class="school-img" style="background-image: url('https://images.unsplash.com/photo-1562774053-701939374585?q=80&w=2086');"></div>
                    <div class="school-body">
                        <h5 style="color:#0a1a5c; font-weight:700;">Ankara Tevfik Fikret Lisesi</h5>
                        <p class="text-muted small">Köklü geçmiş, aydınlık gelecek.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="school-card">
                    <div class="school-img" style="background-image: url('https://images.unsplash.com/photo-1592280771800-bcf9fe730847?q=80&w=2070');"></div>
                    <div class="school-body">
                        <h5 style="color:#0a1a5c; font-weight:700;">Ankara Tevfik Fikret İlköğretim</h5>
                        <p class="text-muted small">Geleceğin liderleri burada yetişiyor.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="school-card">
                    <div class="school-img" style="background-image: url('https://plus.unsplash.com/premium_photo-1664302152996-5e58cb30c776?q=80&w=2070');"></div>
                    <div class="school-body">
                        <h5 style="color:#0a1a5c; font-weight:700;">İzmir Tevfik Fikret Lisesi</h5>
                        <p class="text-muted small">Ege'nin incisinde çağdaş eğitim.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- HAKKIMIZDA BÖLÜMÜ (DB ENTEGRASYONU) -->
<section class="about-modern-section" id="hakkinda">
    <div class="container">
        <div class="row align-items-center">
            <!-- Sol: Görsel -->
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="about-img-wrap">
                    <img src="https://images.unsplash.com/photo-1524178232363-1fb2b075b655?q=80&w=2070&auto=format&fit=crop" alt="Hakkımızda">
                </div>
            </div>

            <!-- Sağ: DB İçeriği -->
            <div class="col-lg-6 ps-lg-5">
                <h6 class="text-uppercase fw-bold mb-2 text-gold-header">Hakkımızda</h6>

                <!-- DB'den Başlık -->
                <h2 class="fw-bold mb-3 text-navy-header">
                    @(Model?.About?.Baslik ?? "Geçmişten Geleceğe Eğitim Köprüsü")
                </h2>

                <!-- DB'den İçerik -->
                <div class="about-text mb-4">
                    @if (!string.IsNullOrEmpty(Model?.About?.Icerik))
                    {
                        @Html.Raw(Model.About.Icerik)
                    }
                    else
                    {
                        <p>Ankara Öğretim Derneği, Tevfik Fikret Eğitim Kurumları'nın kurucusu olarak, Atatürk ilke ve devrimlerine bağlı, laik, çağdaş ve evrensel değerleri benimseyen bireyler yetiştirmeyi amaçlamaktadır.</p>
                        <p>Eğitimde fırsat eşitliği yaratmak adına sağladığımız burslar ve projelerle binlerce öğrencinin hayatına dokunuyoruz.</p>
                    }
                </div>

                <div class="d-flex gap-3">
                    <a href="/Dernek/Hakkinda" class="btn btn-outline-dark rounded-pill px-4" style="border-color:var(--renk-lacivert); color:var(--renk-lacivert);">
                        Devamını Oku <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                    <a href="#iletisim" class="btn btn-outline-secondary rounded-pill px-4">
                        İletişim
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // jQuery'nin yüklendiğinden emin olalım
        if (typeof jQuery == 'undefined') {
            console.error("HATA: jQuery kütüphanesi sayfada yüklü değil! Layout dosyanızı kontrol edin.");
        } else {
            console.log("Başarılı: jQuery çalışıyor, sayaca başlanıyor...");

            $(document).ready(function () {
                $('.counter').each(function () {
                    var $this = $(this);

                    // Sayıyı al ve sayıya çevir (ParseInt)
                    var countTo = parseInt($this.attr('data-count'));
                    var suffix = $this.attr('data-suffix') || "";

                    console.log("Hedef Sayı: " + countTo); // Konsola yazdırır

                    $({ countNum: 0 }).animate({
                        countNum: countTo
                    },
                    {
                        duration: 2000,
                        easing: 'swing',
                        step: function () {
                            $this.text(Math.ceil(this.countNum).toLocaleString('tr-TR') + suffix);
                        },
                        complete: function () {
                            $this.text(Math.ceil(this.countNum).toLocaleString('tr-TR') + suffix);
                        }
                    });
                });
            });
        }
    </script>
}